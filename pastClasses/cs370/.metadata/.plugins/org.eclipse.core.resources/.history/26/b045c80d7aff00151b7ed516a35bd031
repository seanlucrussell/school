import java.util.Random;

public class producer implements Runnable{


	circBuffer buffer;
	Object lock;
	
	public producer(circBuffer buffer, Object lock){
		this.buffer = buffer;
		this.lock = lock;
	}
	
	private synchronized void addItem(double item){
		//System.out.println(buffer.full());
		
		while(buffer.full()){
			try {
				lock.wait();
			} catch (InterruptedException e) {}
		}
		System.out.println("producing");
		buffer.add(item);
		lock.notifyAll();
	}
	
	public void run() {
		Random random = new Random();
		double total = 0;
		int count = 0;
		double item;
		while (count <= 1000000){
			item = random.nextDouble() * 100.0;
			// put item into the buffer
			addItem(item);
			
			
			// do other stuff
			count ++;
			total += item;
			if(count%100000==0)
				System.out.printf("Producer: Produced %d items, Cumulative value of produced items=%.3f\n",count,total);
		}
	}

}
